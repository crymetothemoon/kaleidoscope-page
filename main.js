(window.webpackJsonp=window.webpackJsonp||[]).push([[0],[,,function(e,t,a){e.exports={resetButton:"reset-button",saveMedia:"save-media",helpTag:"help-tag",statisticsTracker:"statistics-tracker",splitter:"splitter",canvasContainer:"canvas-container",accordionHeader:"accordion-header",accordionSection:"accordion-section",colourPicker:"colour-picker",popoverBody:"popover-body",waiting:"waiting",clickable:"clickable",crosshair:"crosshair",outdatedBrowserImg:"outdated-browser-img",gameControlLabel:"game-control-label",gameInfoLabel:"game-info-label"}},,,,,,,,,,,,,function(e,t,a){var n={"./chrome.png":16,"./demo_heavy.gif":17,"./firefox.png":18,"./hexa.gif":19,"./hexagon_ccw_0.5.png":20,"./hexagon_free_0.35.png":21,"./hexagon_free_0.5.png":22,"./hexagon_noacross2_0.5.png":23,"./hexagon_noacross_0.5.png":24,"./hexagon_noajacent_0.5.png":25,"./hexagon_norepeat2_0.5.png":26,"./hexagon_norepeat_0.5.png":27,"./hexagon_trial2_0.5.png":28,"./pentagon_counterclockwise_0.5.png":29,"./pentagon_free_0.4.png":30,"./pentagon_free_0.5.png":31,"./pentagon_noacross2_0.4.png":32,"./pentagon_noacross2_0.5.png":33,"./pentagon_noacross_0.5.png":34,"./pentagon_noajacent2_0.5.png":35,"./pentagon_noajacent_0.5.png":36,"./petagon_norepeat_0.5.png":37,"./sierpinski_triangle.png":38,"./six_fractals.jpg":39,"./square_free_0.45.png":40,"./square_noacross2_0.5.png":41,"./square_noacross_0.5.png":42,"./square_norepeat2_0.5.png":43,"./square_norepeat_0.5.png":44,"./wolfram.gif":45};function o(e){var t=r(e);return a(t)}function r(e){if(!a.o(n,e)){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}return n[e]}o.keys=function(){return Object.keys(n)},o.resolve=r,e.exports=o,o.id=15},function(e,t,a){e.exports=a.p+"chrome.png"},function(e,t,a){e.exports=a.p+"demo_heavy.gif"},function(e,t,a){e.exports=a.p+"firefox.png"},function(e,t,a){e.exports=a.p+"hexa.gif"},function(e,t,a){e.exports=a.p+"hexagon_ccw_0.5.png"},function(e,t,a){e.exports=a.p+"hexagon_free_0.35.png"},function(e,t,a){e.exports=a.p+"hexagon_free_0.5.png"},function(e,t,a){e.exports=a.p+"hexagon_noacross2_0.5.png"},function(e,t,a){e.exports=a.p+"hexagon_noacross_0.5.png"},function(e,t,a){e.exports=a.p+"hexagon_noajacent_0.5.png"},function(e,t,a){e.exports=a.p+"hexagon_norepeat2_0.5.png"},function(e,t,a){e.exports=a.p+"hexagon_norepeat_0.5.png"},function(e,t,a){e.exports=a.p+"hexagon_trial2_0.5.png"},function(e,t,a){e.exports=a.p+"pentagon_counterclockwise_0.5.png"},function(e,t,a){e.exports=a.p+"pentagon_free_0.4.png"},function(e,t,a){e.exports=a.p+"pentagon_free_0.5.png"},function(e,t,a){e.exports=a.p+"pentagon_noacross2_0.4.png"},function(e,t,a){e.exports=a.p+"pentagon_noacross2_0.5.png"},function(e,t,a){e.exports=a.p+"pentagon_noacross_0.5.png"},function(e,t,a){e.exports=a.p+"pentagon_noajacent2_0.5.png"},function(e,t,a){e.exports=a.p+"pentagon_noajacent_0.5.png"},function(e,t,a){e.exports=a.p+"petagon_norepeat_0.5.png"},function(e,t,a){e.exports=a.p+"sierpinski_triangle.png"},function(e,t,a){e.exports=a.p+"six_fractals.jpg"},function(e,t,a){e.exports=a.p+"square_free_0.45.png"},function(e,t,a){e.exports=a.p+"square_noacross2_0.5.png"},function(e,t,a){e.exports=a.p+"square_noacross_0.5.png"},function(e,t,a){e.exports=a.p+"square_norepeat2_0.5.png"},function(e,t,a){e.exports=a.p+"square_norepeat_0.5.png"},function(e,t,a){e.exports=a.p+"wolfram.gif"},function(e,t,a){a(47)(a(48))},,function(e,t){e.exports="fs = os = crypto = util = undefined\nWebAssembly.instantiateStreaming =\n  WebAssembly.instantiateStreaming ||\n  (async (res, opts) => WebAssembly.instantiate(await (await res).arrayBuffer(), opts))\n"},function(e,t,a){(function(e,t){(()=>{if(void 0!==e);else if("undefined"!=typeof window)window.global=window;else{if("undefined"==typeof self)throw new Error("cannot export Go (neither global, window nor self is defined)");self.global=self}const n=e.process&&"node"===e.process.title;if(n){e.require=a(50),e.fs=a(51);const n=a(52);e.crypto={getRandomValues(e){n.randomFillSync(e)}},e.performance={now(){const[e,a]=t.hrtime();return 1e3*e+a/1e6}};const o=a(53);e.TextEncoder=o.TextEncoder,e.TextDecoder=o.TextDecoder}else{let t="";e.fs={constants:{O_WRONLY:-1,O_RDWR:-1,O_CREAT:-1,O_TRUNC:-1,O_APPEND:-1,O_EXCL:-1},writeSync(e,a){const n=(t+=r.decode(a)).lastIndexOf("\n");return-1!=n&&(console.log(t.substr(0,n)),t=t.substr(n+1)),a.length},write(e,t,a,n,o,r){if(0!==a||n!==t.length||null!==o)throw new Error("not implemented");r(null,this.writeSync(e,t))},open(e,t,a,n){const o=new Error("not implemented");o.code="ENOSYS",n(o)},read(e,t,a,n,o,r){const s=new Error("not implemented");s.code="ENOSYS",r(s)},fsync(e,t){t(null)}}}const o=new TextEncoder("utf-8"),r=new TextDecoder("utf-8");if(e.Go=class{constructor(){this.argv=["js"],this.env={},this.exit=e=>{0!==e&&console.warn("exit code:",e)},this._exitPromise=new Promise(e=>{this._resolveExitPromise=e}),this._pendingEvent=null,this._scheduledTimeouts=new Map,this._nextCallbackTimeoutID=1;const e=()=>new DataView(this._inst.exports.mem.buffer),t=(t,a)=>{e().setUint32(t+0,a,!0),e().setUint32(t+4,Math.floor(a/4294967296),!0)},a=t=>{return e().getUint32(t+0,!0)+4294967296*e().getInt32(t+4,!0)},n=t=>{const a=e().getFloat64(t,!0);if(0===a)return;if(!isNaN(a))return a;const n=e().getUint32(t,!0);return this._values[n]},s=(t,a)=>{if("number"==typeof a)return isNaN(a)?(e().setUint32(t+4,2146959360,!0),void e().setUint32(t,0,!0)):0===a?(e().setUint32(t+4,2146959360,!0),void e().setUint32(t,1,!0)):void e().setFloat64(t,a,!0);switch(a){case void 0:return void e().setFloat64(t,0,!0);case null:return e().setUint32(t+4,2146959360,!0),void e().setUint32(t,2,!0);case!0:return e().setUint32(t+4,2146959360,!0),void e().setUint32(t,3,!0);case!1:return e().setUint32(t+4,2146959360,!0),void e().setUint32(t,4,!0)}let n=this._refs.get(a);void 0===n&&(n=this._values.length,this._values.push(a),this._refs.set(a,n));let o=0;switch(typeof a){case"string":o=1;break;case"symbol":o=2;break;case"function":o=3}e().setUint32(t+4,2146959360|o,!0),e().setUint32(t,n,!0)},c=e=>{const t=a(e+0),n=a(e+8);return new Uint8Array(this._inst.exports.mem.buffer,t,n)},l=e=>{const t=a(e+0),o=a(e+8),r=new Array(o);for(let e=0;e<o;e++)r[e]=n(t+8*e);return r},i=e=>{const t=a(e+0),n=a(e+8);return r.decode(new DataView(this._inst.exports.mem.buffer,t,n))},u=Date.now()-performance.now();this.importObject={go:{"runtime.wasmExit":t=>{const a=e().getInt32(t+8,!0);this.exited=!0,delete this._inst,delete this._values,delete this._refs,this.exit(a)},"runtime.wasmWrite":t=>{const n=a(t+8),o=a(t+16),r=e().getInt32(t+24,!0);fs.writeSync(n,new Uint8Array(this._inst.exports.mem.buffer,o,r))},"runtime.nanotime":e=>{t(e+8,1e6*(u+performance.now()))},"runtime.walltime":a=>{const n=(new Date).getTime();t(a+8,n/1e3),e().setInt32(a+16,n%1e3*1e6,!0)},"runtime.scheduleTimeoutEvent":t=>{const n=this._nextCallbackTimeoutID;this._nextCallbackTimeoutID++,this._scheduledTimeouts.set(n,setTimeout(()=>{this._resume()},a(t+8)+1)),e().setInt32(t+16,n,!0)},"runtime.clearTimeoutEvent":t=>{const a=e().getInt32(t+8,!0);clearTimeout(this._scheduledTimeouts.get(a)),this._scheduledTimeouts.delete(a)},"runtime.getRandomData":e=>{crypto.getRandomValues(c(e+8))},"syscall/js.stringVal":e=>{s(e+24,i(e+8))},"syscall/js.valueGet":e=>{const t=Reflect.get(n(e+8),i(e+16));e=this._inst.exports.getsp(),s(e+32,t)},"syscall/js.valueSet":e=>{Reflect.set(n(e+8),i(e+16),n(e+32))},"syscall/js.valueIndex":e=>{s(e+24,Reflect.get(n(e+8),a(e+16)))},"syscall/js.valueSetIndex":e=>{Reflect.set(n(e+8),a(e+16),n(e+24))},"syscall/js.valueCall":t=>{try{const a=n(t+8),o=Reflect.get(a,i(t+16)),r=l(t+32),c=Reflect.apply(o,a,r);t=this._inst.exports.getsp(),s(t+56,c),e().setUint8(t+64,1)}catch(a){s(t+56,a),e().setUint8(t+64,0)}},"syscall/js.valueInvoke":t=>{try{const a=n(t+8),o=l(t+16),r=Reflect.apply(a,void 0,o);t=this._inst.exports.getsp(),s(t+40,r),e().setUint8(t+48,1)}catch(a){s(t+40,a),e().setUint8(t+48,0)}},"syscall/js.valueNew":t=>{try{const a=n(t+8),o=l(t+16),r=Reflect.construct(a,o);t=this._inst.exports.getsp(),s(t+40,r),e().setUint8(t+48,1)}catch(a){s(t+40,a),e().setUint8(t+48,0)}},"syscall/js.valueLength":e=>{t(e+16,parseInt(n(e+8).length))},"syscall/js.valuePrepareString":e=>{const a=o.encode(String(n(e+8)));s(e+16,a),t(e+24,a.length)},"syscall/js.valueLoadString":e=>{const t=n(e+8);c(e+16).set(t)},"syscall/js.valueInstanceOf":t=>{e().setUint8(t+24,n(t+8)instanceof n(t+16))},debug:e=>{console.log(e)}}}}async run(t){this._inst=t,this._values=[NaN,0,null,!0,!1,e,this._inst.exports.mem,this],this._refs=new Map,this.exited=!1;const a=new DataView(this._inst.exports.mem.buffer);let n=4096;const r=e=>{let t=n;return new Uint8Array(a.buffer,n,e.length+1).set(o.encode(e+"\0")),n+=e.length+(8-e.length%8),t},s=this.argv.length,c=[];this.argv.forEach(e=>{c.push(r(e))});const l=Object.keys(this.env).sort();c.push(l.length),l.forEach(e=>{c.push(r(`${e}=${this.env[e]}`))});const i=n;c.forEach(e=>{a.setUint32(n,e,!0),a.setUint32(n+4,0,!0),n+=8}),this._inst.exports.run(s,i),this.exited&&this._resolveExitPromise(),await this._exitPromise}_resume(){if(this.exited)throw new Error("Go program has already exited");this._inst.exports.resume(),this.exited&&this._resolveExitPromise()}_makeFuncWrapper(e){const t=this;return function(){const a={id:e,this:this,args:arguments};return t._pendingEvent=a,t._resume(),a.result}}},n){t.argv.length<3&&(t.stderr.write("usage: go_js_wasm_exec [wasm binary] [arguments]\n"),t.exit(1));const e=new Go;e.argv=t.argv.slice(2),e.env=Object.assign({TMPDIR:a(56).tmpdir()},t.env),e.exit=t.exit,WebAssembly.instantiate(fs.readFileSync(t.argv[2]),e.importObject).then(a=>(t.on("exit",t=>{0!==t||e.exited||(e._pendingEvent={id:0},e._resume())}),e.run(a.instance))).catch(e=>{throw e})}})()}).call(this,a(4),a(7))},function(e,t){function a(e){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}a.keys=function(){return[]},a.resolve=a,e.exports=a,a.id=50},function(e,t){e.exports=fs},function(e,t){e.exports=crypto},,,,function(e,t){e.exports=os},,,,,,,,,,,,,,,,function(e,t,a){"use strict";a.r(t);var n=a(1),o=a.n(n);const r=e=>a(15)(`./${e}`),s=()=>new Promise(e=>document.addEventListener("DOMContentLoaded",e,{once:!0})),c=(...e)=>e.flatMap(e=>"string"==typeof e?[e]:Object.entries(e).flatMap(([e,t])=>t?[e]:[])).join(" "),l=(e,t)=>a=>Math.max(e,Math.min(t,a)),i=(e,t)=>{let a=1/0,n=!1;const o=(...e)=>{n||(n=!0,t(...e))};return(...t)=>{clearTimeout(a),n?a=setTimeout(()=>o(...t),e):(setTimeout(()=>n=!1,e),o(...t))}},u=()=>{let e=performance.now();return()=>{const t=e;return(e=performance.now())-t}},m=({name:e,uri:t})=>{const a=document.body.appendChild(document.createElement("a"));a.target="_blank",a.download=e,a.href=t,a.click(),a.remove()};var d;!function(e){e[e.triangle=3]="triangle",e[e.square=4]="square",e[e.pentagon=5]="pentagon",e[e.hexagon=6]="hexagon",e[e.heptagon=7]="heptagon",e[e.octagon=8]="octagon",e[e.nonagon=9]="nonagon",e[e.decagon=10]="decagon",e[e.hendecagon=11]="hendecagon",e[e.dodecagon=12]="dodecagon"}(d||(d={}));const p=Object.values(d).filter(e=>"number"==typeof e);var g;!function(e){e[e.slowest=0]="slowest",e[e.slower=1]="slower",e[e.slow=2]="slow",e[e.normal=3]="normal",e[e.fast=4]="fast",e[e.ridiculous=5]="ridiculous",e[e.ludicrous=6]="ludicrous"}(g||(g={}));const f=((e,t)=>[...Array(t-e+1)].map((t,a)=>a+e))(g.slowest,g.ludicrous),h={[g.slowest]:{dots:1,fps:2},[g.slower]:{dots:1,fps:10},[g.slow]:{dots:1,fps:30},[g.normal]:{dots:25,fps:60},[g.fast]:{dots:50,fps:60},[g.ridiculous]:{dots:200,fps:60},[g.ludicrous]:{dots:1e3,fps:60}};var _;!function(e){e[e.none=0]="none",e[e.force_CW=1]="force_CW",e[e.noSameDir=2]="noSameDir",e[e.last_noSameDir=3]="last_noSameDir",e[e.noAdjacent_exclusive=4]="noAdjacent_exclusive",e[e.last_noAdjacent_exclusive=5]="last_noAdjacent_exclusive",e[e.noAcross=6]="noAcross",e[e.last_noAcross=7]="last_noAcross",e[e.noAdjacent_inclusive=8]="noAdjacent_inclusive",e[e.last_noAdjacent_inclusive=9]="last_noAdjacent_inclusive"}(_||(_={}));const w={3:[_.none,_.force_CW,_.noSameDir,_.last_noSameDir],4:[_.none,_.force_CW,_.noSameDir,_.last_noSameDir,_.noAcross,_.last_noAcross,_.noAdjacent_exclusive,_.last_noAdjacent_exclusive,_.noAdjacent_inclusive,_.last_noAdjacent_inclusive],5:[_.none,_.force_CW,_.noSameDir,_.last_noSameDir,_.noAcross,_.last_noAcross,_.noAdjacent_exclusive,_.last_noAdjacent_exclusive,_.noAdjacent_inclusive,_.last_noAdjacent_inclusive],6:[_.none,_.force_CW,_.noSameDir,_.last_noSameDir,_.noAcross,_.last_noAcross,_.noAdjacent_exclusive,_.last_noAdjacent_exclusive,_.noAdjacent_inclusive,_.last_noAdjacent_inclusive],7:[_.none,_.force_CW,_.noSameDir,_.last_noSameDir,_.noAcross,_.last_noAcross,_.noAdjacent_exclusive,_.last_noAdjacent_exclusive,_.noAdjacent_inclusive,_.last_noAdjacent_inclusive],8:[_.none,_.force_CW,_.noSameDir,_.last_noSameDir,_.noAcross,_.last_noAcross,_.noAdjacent_exclusive,_.last_noAdjacent_exclusive,_.noAdjacent_inclusive,_.last_noAdjacent_inclusive],9:[_.none,_.force_CW,_.noSameDir,_.last_noSameDir,_.noAcross,_.last_noAcross,_.noAdjacent_exclusive,_.last_noAdjacent_exclusive,_.noAdjacent_inclusive,_.last_noAdjacent_inclusive],10:[_.none,_.force_CW,_.noSameDir,_.last_noSameDir,_.noAcross,_.last_noAcross,_.noAdjacent_exclusive,_.last_noAdjacent_exclusive,_.noAdjacent_inclusive,_.last_noAdjacent_inclusive],11:[_.none,_.force_CW,_.noSameDir,_.last_noSameDir,_.noAcross,_.last_noAcross,_.noAdjacent_exclusive,_.last_noAdjacent_exclusive,_.noAdjacent_inclusive,_.last_noAdjacent_inclusive],12:[_.none,_.force_CW,_.noSameDir,_.last_noSameDir,_.noAcross,_.last_noAcross,_.noAdjacent_exclusive,_.last_noAdjacent_exclusive,_.noAdjacent_inclusive,_.last_noAdjacent_inclusive]},v=[{image:r("sierpinski_triangle.png"),polygon:d.triangle,restriction:_.none,compression:.5,colourA:[0,1,1,1],colourB:[1,.08,.58,1]},{image:r("square_noacross_0.5.png"),polygon:d.square,restriction:_.noAcross,compression:.5,colourA:[0,1,1,1],colourB:[1,.08,.58,1]},{image:r("square_noacross2_0.5.png"),polygon:d.square,restriction:_.last_noAcross,compression:.5,colourA:[0,1,1,1],colourB:[1,.08,.58,1]},{image:r("square_norepeat_0.5.png"),polygon:d.square,restriction:_.noSameDir,compression:.5,colourA:[0,1,1,1],colourB:[1,.08,.58,1]},{image:r("square_norepeat2_0.5.png"),polygon:d.square,restriction:_.last_noSameDir,compression:.5,colourA:[0,1,1,1],colourB:[1,.08,.58,1]},{image:r("pentagon_free_0.4.png"),polygon:d.pentagon,restriction:_.none,compression:.4,colourA:[0,1,1,1],colourB:[1,.08,.58,1]},{image:r("pentagon_free_0.5.png"),polygon:d.pentagon,restriction:_.none,compression:.5,colourA:[0,1,1,1],colourB:[1,.08,.58,1]},{image:r("pentagon_counterclockwise_0.5.png"),polygon:d.pentagon,restriction:_.force_CW,compression:.5,colourA:[0,1,1,1],colourB:[1,.08,.58,1]},{image:r("pentagon_noacross_0.5.png"),polygon:d.pentagon,restriction:_.noAcross,compression:.5,colourA:[0,1,1,1],colourB:[1,.08,.58,1]},{image:r("pentagon_noacross2_0.4.png"),polygon:d.pentagon,restriction:_.last_noAcross,compression:.4,colourA:[0,1,1,1],colourB:[1,.08,.58,1]},{image:r("pentagon_noacross2_0.5.png"),polygon:d.pentagon,restriction:_.last_noAcross,compression:.5,colourA:[0,1,1,1],colourB:[1,.08,.58,1]},{image:r("pentagon_noajacent_0.5.png"),polygon:d.pentagon,restriction:_.noAdjacent_exclusive,compression:.5,colourA:[0,1,1,1],colourB:[1,.08,.58,1]},{image:r("pentagon_noajacent2_0.5.png"),polygon:d.pentagon,restriction:_.last_noAdjacent_exclusive,compression:.5,colourA:[0,1,1,1],colourB:[1,.08,.58,1]},{image:r("petagon_norepeat_0.5.png"),polygon:d.pentagon,restriction:_.noSameDir,compression:.5,colourA:[0,1,1,1],colourB:[1,.08,.58,1]},{image:r("hexagon_free_0.35.png"),polygon:d.hexagon,restriction:_.none,compression:.35,colourA:[0,1,1,1],colourB:[1,.08,.58,1]},{image:r("hexagon_free_0.5.png"),polygon:d.hexagon,restriction:_.none,compression:.5,colourA:[0,1,1,1],colourB:[1,.08,.58,1]},{image:r("hexagon_ccw_0.5.png"),polygon:d.hexagon,restriction:_.force_CW,compression:.5,colourA:[0,1,1,1],colourB:[1,.08,.58,1]},{image:r("hexagon_noacross_0.5.png"),polygon:d.hexagon,restriction:_.noAcross,compression:.5,colourA:[0,1,1,1],colourB:[1,.08,.58,1]},{image:r("hexagon_noacross2_0.5.png"),polygon:d.hexagon,restriction:_.last_noAcross,compression:.5,colourA:[0,1,1,1],colourB:[1,.08,.58,1]},{image:r("hexagon_noajacent_0.5.png"),polygon:d.hexagon,restriction:_.noAdjacent_exclusive,compression:.5,colourA:[0,1,1,1],colourB:[1,.08,.58,1]},{image:r("hexagon_norepeat_0.5.png"),polygon:d.hexagon,restriction:_.noSameDir,compression:.5,colourA:[0,1,1,1],colourB:[1,.08,.58,1]},{image:r("hexagon_norepeat2_0.5.png"),polygon:d.hexagon,restriction:_.last_noSameDir,compression:.5,colourA:[0,1,1,1],colourB:[1,.08,.58,1]},{image:r("hexagon_trial2_0.5.png"),polygon:d.hexagon,restriction:_.last_noAdjacent_inclusive,compression:.5,colourA:[0,1,1,1],colourB:[1,.08,.58,1]}],x={game:{polygon:d.triangle,jumpFunction:_.none,compression:.5,speed:g.normal,runloop:{status:"before-start"}},canvas:{drawTracers:"on",colours:{colourA:[0,1,1,1],colourB:[1,.08,.58,1],tracer:[1,1,0,1],polygon:[0,0,0,1],background:[1,1,1,0]}},page:{canvas:{status:"loading"},wasm:{status:"loading"}},statistics:{fps:0,dotsDrawn:0},recording:{status:"not-recording"}};a(46),a(49);const E=e=>{const{polygon:{release:t},dots:{release:a},vertextracers:{release:n},dottracers:{release:o}}=e;t(),a(),n(),o()},b=e=>t=>async a=>{const n=await fetch(t,{method:e,body:a&&JSON.stringify(a)});if(n.ok)return n.json();throw new Error(`${n.status}`)},y=b("GET"),A=(b("PUT"),b("POST"),b("DELETE"),async(e,t)=>{const a=await y(`${e}.json`)();return(e,...n)=>{const o=(e=>()=>n[e++])(0);return t&&!Reflect.has(a,e)&&console.error(`Missing i18n key: ${e}`),(a[e]||{message:e}).message.replace(/%@/g,o)}}),N=(e,t)=>{const a={...e};switch(t.type){case"new-polygon":a.polygon=t.polygon;break;case"new-jump-func":a.jumpFunction=t.rule;break;case"new-compression":a.compression=t.compression;break;case"new-speed":a.speed=t.value;break;case"start-game":a.runloop={status:"running",stop:t.stop};break;case"pause-game":a.runloop={status:"paused"};break;case"end-game":a.runloop={status:"before-start"}}return a},R=(e,t)=>{const a={...e};switch(t.type){case"colour-update":a.colours[t.location]=t.colour;break;case"draw-tracers":a.drawTracers=t.value}return a},C=(e,t)=>{const a={...e};switch(t.type){case"no-webgl2":a.canvas={status:"failed"};break;case"canvas-loaded":a.canvas={status:"loaded",render:t.render};break;case"wasm-loaded":a.wasm={status:"loaded",exports:t.exports}}return a},j=(e,t)=>{const a={...e};switch(t.type){case"end-game":a.fps=0,a.dotsDrawn=0}return a},F=(e,t)=>{switch(t.type){case"start-recording":return{status:"recording",recorder:t.recorder};case"end-recording":return{status:"not-recording"}}return e},T=(e,t)=>{const a={...e};switch(t.type){case"statistics-update":const{game:{runloop:{status:n}},statistics:{dotsDrawn:o}}=e,r="running"!==n?0:t.fps,s="before-start"===n?0:o+t.dotsDrawn;a.statistics={fps:r,dotsDrawn:s}}return a},D=e=>((e,t,a=((e,t)=>e=>t(e)))=>{let n=e,o=[];const r=()=>n;return{subscribe:e=>(o=[...o,e],()=>void(o=o.filter(t=>t!==e))),fetch:r,dispatch:a(r,e=>{n=t(n,e),o.map(e=>e())})}})(e,((e,...t)=>(a,n)=>t.reduce((e,t)=>t(e,n),e(a,n)))((e=>(t,a)=>Object.entries(e).reduce((e,[n,o])=>({...e,[n]:o(t[n],a)}),{}))({game:N,canvas:R,page:C,statistics:j,recording:F}),T),(e=>(t,a)=>n=>"function"==typeof n?n(()=>({...t(),...e}),a):a(n))({}));var S=a(3),B=a.n(S),k=a(0),L=a.n(k),U=a(2),O=a.n(U),I=a(11),P=a(6),G=a.n(P);const M=e=>o.a.createElement("div",{className:L.a.accordion},e.children),W=e=>{const{id:t,defaultShow:a,children:n}=e,[r=o.a.createElement("div",null),s=o.a.createElement("div",null)]=o.a.Children.toArray(n);return o.a.createElement("section",{key:t,className:c(O.a.accordionSection,L.a.card)},o.a.createElement("div",{className:c(O.a.accordionHeader,L.a.cardHeader,L.a.textTruncate),"data-toggle":"collapse","data-target":`#${t}`},r),o.a.createElement("div",{id:t,className:c(L.a.cardBody,L.a.collapse,{show:a})},s))};var q=a(12),z=a.n(q);a(58);const V={0:0,1:1,2:2,3:3,4:4,5:5,6:6,7:7,8:8,9:9,A:10,B:11,C:12,D:13,E:14,F:15},$=Object.entries(V).reduce((e,[t,a])=>({...e,[a]:t}),{}),H=e=>{const t=o.a.createRef(),{id:a,colour:n}=e,[r,s,l]=n.map(e=>Math.round(255*e));let i;return o.a.useEffect(()=>{const a=t.current;B()(a).popover({}).on("inserted.bs.popover",()=>{if(i)return;const{colour:t,onChange:n}=e,[o,r,s]=t.map(e=>$[Math.round(15*e)]),c=((e,t=document)=>t.querySelector(e))(`#${a.getAttribute("aria-describedby")} .popover-body`);(i=new z.a(c,{staticOpen:!0,setText:!1,setBGColor:!1,saturations:2})).setColor(`#${[o,r,s].join("")}`),i.on("change",e=>{const[,t,a,o]=e.split("").map(e=>V[e]/15);n([t,a,o,1])})})},[]),o.a.createElement("input",{id:a,ref:t,className:c(O.a.colourPicker,O.a.clickable,L.a.formControl),style:{backgroundColor:`rgb(${r}, ${s}, ${l})`},"data-trigger":"focus","data-boundary":"viewport","data-content":" ",readOnly:!0})},Y=e=>{const{label:t,colour:a,onChange:n,id:r}=e;return o.a.createElement("div",{className:c(L.a.inputGroup,L.a.flexNowrap)},o.a.createElement("div",{className:c(L.a.inputGroupPrepend,L.a.flexGrow1)},o.a.createElement("label",{htmlFor:r,className:c(L.a.inputGroupText,L.a.flexGrow1,O.a.clickable)},t)),o.a.createElement(H,{id:r,colour:a,onChange:n}))};var J="varying lowp vec4 colourV;\n\nvoid main()\n{\n    gl_FragColor = colourV;\n}";const X=(e,{width:t,height:a})=>{const n=(e=>{const t=e.createFramebuffer();e.bindFramebuffer(e.FRAMEBUFFER,t),console.assert(e.getError()===e.NO_ERROR);return{bind:a=>{switch(a){case"read":return e.bindFramebuffer(e.READ_FRAMEBUFFER,t);case"draw":return e.bindFramebuffer(e.DRAW_FRAMEBUFFER,t);case"both":return e.bindFramebuffer(e.FRAMEBUFFER,t)}},self:()=>t,remove:()=>e.deleteFramebuffer(t)}})(e),o=((e,{width:t,height:a})=>{const n=e.createRenderbuffer();e.bindRenderbuffer(e.RENDERBUFFER,n),e.renderbufferStorage(e.RENDERBUFFER,e.RGB5_A1,t,a),e.framebufferRenderbuffer(e.FRAMEBUFFER,e.COLOR_ATTACHMENT0,e.RENDERBUFFER,n),console.assert(e.isRenderbuffer(n)),console.assert(e.getError()===e.NO_ERROR);return{bind:()=>e.bindRenderbuffer(e.RENDERBUFFER,n),remove:()=>e.deleteRenderbuffer(n)}})(e,{width:t,height:a});console.assert(e.getError()===e.NO_ERROR);const r=o=>{e.viewport(0,0,t,a),n.bind(o)},s=(n,{width:o,height:s})=>{r("read"),e.bindFramebuffer(e.DRAW_FRAMEBUFFER,n),e.blitFramebuffer(0,0,t,a,0,0,o,s,e.COLOR_BUFFER_BIT,e.NEAREST)};return{fbo:()=>n.self(),viewport:()=>({width:t,height:a}),bind:r,blit:s,blitToScreen:()=>s(null,(e=>({width:Math.floor(e.drawingBufferWidth),height:Math.floor(e.drawingBufferHeight)}))(e)),read:()=>{const n=new Uint8Array(t*a*4);return r("read"),e.readPixels(0,0,t,a,e.RGBA,e.UNSIGNED_BYTE,n),n},remove:()=>{n.remove(),o.remove()}}},K=(e,t,a)=>{const n=e.createBuffer();e.bindBuffer(e.ARRAY_BUFFER,n),e.bufferData(e.ARRAY_BUFFER,t,e.STATIC_DRAW),a(),e.bindBuffer(e.ARRAY_BUFFER,null),e.deleteBuffer(n)},Q=(e,t,{type:a,source:n})=>{const o=e.createShader("vertex"===a?e.VERTEX_SHADER:e.FRAGMENT_SHADER);e.shaderSource(o,n),e.compileShader(o),console.assert(""===e.getShaderInfoLog(o)),e.attachShader(t,o),e.deleteShader(o)},Z=(e,{vsh:t,fsh:a})=>{const n=e.createProgram();Q(e,n,{type:"vertex",source:t}),Q(e,n,{type:"fragment",source:a}),e.linkProgram(n),console.assert(e.getProgramParameter(n,e.LINK_STATUS)),console.assert(""===e.getProgramInfoLog(n)),console.assert(e.getError()===e.NO_ERROR);return{use:()=>e.useProgram(n),getUniformLocation:t=>e.getUniformLocation(n,t),getAndEnableAttributeLocation:t=>{const a=e.getAttribLocation(n,t);return e.enableVertexAttribArray(a),a},remove:()=>e.deleteProgram(n)}},ee=e=>{const t=(e=>{const t=Z(e,{vsh:"uniform lowp float vertexCount;\nuniform lowp vec4 colourA;\nuniform lowp vec4 colourB;\nuniform lowp float pointSize;\n\nattribute lowp vec3 vertex;\n\nvarying lowp vec4 colourV;\n\nvoid main()\n{\n    colourV = mix(colourA, colourB, vertex.z / (vertexCount - 1.0));\n    gl_Position = vec4(vertex.x, vertex.y, 0.0, 1.0);\n    gl_PointSize = pointSize;\n}\n",fsh:J});t.use();const a=t.getUniformLocation("vertexCount"),n=t.getUniformLocation("pointSize"),o=t.getUniformLocation("colourA"),r=t.getUniformLocation("colourB"),s=t.getAndEnableAttributeLocation("vertex");return{drawCanvas:(a,n)=>{t.use(),e.clearColor(...n.background),e.clear(e.COLOR_BUFFER_BIT),e.uniform4f(o,...n.polygon),e.uniform4f(r,...n.polygon),K(e,a,()=>{e.vertexAttribPointer(s,2,e.FLOAT,!1,0,0),e.drawArrays(e.TRIANGLE_FAN,0,a.length/2)})},drawDots:(c,l,i)=>{t.use(),e.uniform1f(a,l),e.uniform1f(n,1),e.uniform4f(o,...i.colourA),e.uniform4f(r,...i.colourB),K(e,c,()=>{e.vertexAttribPointer(s,3,e.FLOAT,!1,0,0),e.drawArrays(e.POINTS,0,c.length/3)})}}})(e),a=(e=>{const t=Z(e,{vsh:"uniform lowp vec4 colour;\n\nattribute lowp vec2 vertex;\n\nvarying lowp vec4 colourV;\n\nvoid main()\n{\n    colourV = colour;\n    gl_Position = vec4(vertex.x, vertex.y, 0.0, 1.0);\n}\n",fsh:J});t.use();const a=t.getUniformLocation("colour"),n=t.getAndEnableAttributeLocation("vertex");return{drawTracers:(o,r,s)=>{t.use(),e.uniform4f(a,...s.tracer),K(e,o,()=>{e.vertexAttribPointer(n,2,e.FLOAT,!1,0,0),e.drawArrays(e.TRIANGLE_FAN,0,o.length/2)}),K(e,r,()=>{e.vertexAttribPointer(n,2,e.FLOAT,!1,0,0),e.drawArrays(e.TRIANGLE_FAN,0,r.length/2)})}}})(e),n=()=>{const t=(()=>{const{clientWidth:e,clientHeight:t}=document.documentElement,a=Math.floor(Math.min(e,t));return{width:a,height:a}})();return[t,X(e,t),X(e,t)]};let[o,r,s]=n();return{stream:()=>e.canvas.captureStream(),initialize:(e,a)=>{const{polygon:{array:c}}=e;[r,s].map(e=>e.remove()),[o,r,s]=n(),r.bind("draw"),t.drawCanvas(c,a),r.blit(s.fbo(),s.viewport()),s.blitToScreen(),E(e)},draw:(e,n,o,c)=>{const{count:l,dots:{array:i},vertextracers:{array:u},dottracers:{array:m}}=e;r.bind("draw"),o&&t.drawDots(i,l,n),r.blit(s.fbo(),s.viewport()),s.bind("draw"),o&&c&&a.drawTracers(u,m,n),s.blitToScreen(),E(e)},redraw:e=>(e?s:r).blitToScreen(),screenshot:()=>{const e=r.read(),t=document.createElement("canvas"),a=new ImageData(Uint8ClampedArray.from(e),t.width=o.width,t.height=o.height),n=t.getContext("2d");return n.putImageData(a,0,0),n.globalCompositeOperation="copy",n.scale(1,-1),n.translate(0,-t.height),n.drawImage(t,0,0),n.setTransform(1,0,0,1,0,0),n.globalCompositeOperation="source-over",t.toDataURL()}}},te={theta:Math.PI/12,rotations:20,dotTracerSize:.005,vertexTracerSize:.05},ae=(e=>{let t=1/0,a=!1,n=[],o=0;const r=e=>{e({type:"statistics-update",fps:n.reduce((e,t)=>e+t,0)/n.length,dotsDrawn:o}),n=[],o=0};return(e,s)=>(c,l)=>{n=[...n,e],o+=s,clearTimeout(t),a?t=setTimeout(()=>r(l),1e3):(a=!0,setTimeout(()=>a=!1,1e3),r(l))}})(),ne=e=>{const{page:{canvas:t,wasm:a},canvas:{colours:n}}=e();if("loaded"!==a.status||"loaded"!==t.status)return;const{exports:{RequestDrawingInstructions:o}}=a,{initialize:r}=t.render;o(te);const s=o(te);if("error"===s.type)return console.error(s.error);r(s.value,n)},oe=e=>{const{page:{canvas:t},canvas:{drawTracers:a}}=e();if("loaded"!==t.status)return;const{redraw:n}=t.render;n("on"===a)},re=(e,t)=>(e=>{const t=u();let a=!0;const n=async()=>{await e(1e3/t()),a&&requestAnimationFrame(n)};return requestAnimationFrame(n),()=>a=!1})(async a=>{const n=u(),{game:{speed:o,runloop:{status:r}},canvas:{colours:s,drawTracers:c},page:{canvas:l,wasm:i}}=e();if("loaded"!==i.status||"loaded"!==l.status)return;const{fps:m,dots:d}=h[o],{RequestDrawingInstructions:p}=i.exports,{draw:g}=l.render,f=800/m,_=p(te);if("error"===_.type)return console.error(_.error);g(_.value,s,"before-start"!==r,"on"===c),ae(a,d)(e,t),m<60&&await(e=>new Promise(t=>setTimeout(t,e)))(f-n())}),se=e=>(t,a)=>{const{game:{runloop:n},page:{wasm:o}}=t();if("loaded"!==o.status)return;"running"===n.status&&n.stop(),a({type:"end-game"});const{NewVertices:r}=o.exports,s=r(e);if("error"===s.type)return console.error(s.error);a({type:"new-polygon",polygon:e}),setTimeout(()=>ne(t))},ce=e=>(t,a)=>{const{wasm:n}=t().page;if("loaded"!==n.status)return;const{NewRestriction:o}=n.exports,r=o(e);if("error"===r.type)return console.error(r.error);a({type:"new-jump-func",rule:e})},le=e=>(t,a)=>{const{wasm:n}=t().page;if("loaded"!==n.status)return;const{NewCompression:o}=n.exports,r=o(e);if("error"===r.type)return console.error(r.error);a({type:"new-compression",compression:e})},ie=e=>(t,a)=>{const{wasm:n}=t().page;if("loaded"!==n.status)return;const{NewDots:o}=n.exports,r=o(h[e].dots);if("error"===r.type)return console.error(r.error);a({type:"new-speed",value:e})},ue=e=>(t,a)=>{const{polygon:n,restriction:o,compression:r,colourA:s,colourB:c}=e;a({type:"colour-update",location:"colourA",colour:s}),a({type:"colour-update",location:"colourB",colour:c}),ce(o)(t,a),le(r)(t,a),se(n)(t,a)},me=e=>(t,a)=>{const n=e[((e,t)=>Math.floor(Math.random()*(t-e+1))+e)(0,e.length-1)],{game:{speed:o}}=t();ie(o)(t,a),ue(n)(t,a)},de=()=>(e,t)=>{const{recording:a,page:{canvas:n}}=e();if("loaded"!==n.status)return;const{stream:o}=n.render;switch(a.status){case"recording":{const{recorder:e}=a;return e.stop(),t({type:"end-recording"})}case"not-recording":{const e=((e,t,a)=>{console.log(e);let n=[];const{mimeType:o}=t,r=new MediaRecorder(e,t);return r.ondataavailable=({data:e})=>n=[...n,e],r.onstop=()=>a(new Blob(n,{type:o})),{start:()=>r.start(),stop:()=>{r.stop(),e.getTracks().map(e=>e.stop())}}})(o(),{mimeType:"video/webm"},e=>{const t=URL.createObjectURL(e);m({name:`${String(Math.random()).replace(".","")}.webm`,uri:t}),setTimeout(()=>URL.revokeObjectURL(t))});return e.start(),t({type:"start-recording",recorder:e})}}},pe=e=>{const{Lang:t,store:{fetch:a,dispatch:n}}=e,{canvas:{drawTracers:r,colours:{tracer:s,colourA:l,colourB:i}}}=a();return o.a.createElement(W,{id:"canvas-control",defaultShow:!0},o.a.createElement("a",{href:"#"},o.a.createElement("h5",null,t("canvas control"))),o.a.createElement("form",null,o.a.createElement("div",{className:L.a.formRow},o.a.createElement("div",{className:L.a.col},o.a.createElement("div",{className:c(L.a.customControl,L.a.customSwitch,L.a.formControl)},o.a.createElement("input",{id:"tracer-enable-input",className:L.a.customControlInput,type:"checkbox",checked:"on"===r,onChange:({currentTarget:{checked:e}})=>n((e=>(t,a)=>{a({type:"draw-tracers",value:e}),oe(t)})(e?"on":"off"))}),o.a.createElement("label",{htmlFor:"tracer-enable-input",className:c(L.a.customControlLabel,L.a.ml2,L.a.textNowrap,O.a.clickable)},t("tracer enable")))),o.a.createElement("div",{className:L.a.col},o.a.createElement(Y,{id:"colour-tracer",label:t("tracer"),colour:s,onChange:e=>n({type:"colour-update",location:"tracer",colour:e})}))),o.a.createElement("hr",null),o.a.createElement("div",{className:L.a.formRow},o.a.createElement("div",{className:L.a.col},o.a.createElement(Y,{id:"colour-a",label:t("colour a"),colour:l,onChange:e=>n({type:"colour-update",location:"colourA",colour:e})})),o.a.createElement("div",{className:L.a.col},o.a.createElement(Y,{id:"colour-b",label:t("colour b"),colour:i,onChange:e=>n({type:"colour-update",location:"colourB",colour:e})})))))},ge=e=>{const{store:{dispatch:t},preset:a}=e,{image:n}=a;return o.a.createElement("li",{className:c(L.a.listGroupItem,L.a.p2)},o.a.createElement("div",{className:c(L.a.card,O.a.clickable),onClick:()=>t(ue(a))},o.a.createElement("img",{className:c(L.a.cardImg),src:n})))},fe=e=>{const{Lang:t,store:a,presets:n}=e;return o.a.createElement("div",{className:c(L.a.dFlex,L.a.flexColumn,L.a.py2,L.a.bgLight,L.a.w100)},o.a.createElement("section",{className:L.a.w100},o.a.createElement("h4",{className:L.a.textCenter},t("presets"))),o.a.createElement("ul",{className:c(L.a.listGroup,L.a.listGroupFlush,L.a.w100,L.a.overflowAuto)},n.map(e=>o.a.createElement(ge,{Lang:t,key:e.image,store:a,preset:e}))))},he=e=>{const{Lang:t,store:{fetch:a,dispatch:n}}=e,{game:{polygon:r,jumpFunction:s,compression:l,speed:i}}=a();return o.a.createElement(W,{id:"game-control",defaultShow:!0},o.a.createElement("a",{href:"#"},o.a.createElement("h5",null,t("game control"))),o.a.createElement("form",null,o.a.createElement(_e,{htmlFor:"polygon-input",label:t("polygon")},o.a.createElement("select",{id:"polygon-input",className:L.a.formControl,value:r,onChange:({currentTarget:{value:e}})=>n(se(Number(e)))},p.map(e=>o.a.createElement("option",{key:e,value:e},t(d[e]))))),o.a.createElement(_e,{htmlFor:"jumpfn-input",label:t("jump function")},o.a.createElement("select",{id:"jumpfn-input",className:L.a.formControl,value:s,onChange:({currentTarget:{value:e}})=>n(ce(Number(e)))},w[r].map(e=>o.a.createElement("option",{key:e,value:e},t(_[e]))))),o.a.createElement(_e,{htmlFor:"compression-input",label:t("compression ratio %@",l.toFixed(2))},o.a.createElement("input",{id:"compression-input",className:c(L.a.formControlRange,L.a.customRange),type:"range",min:"0",max:"1",step:"0.05",value:l,onChange:({currentTarget:{value:e}})=>n(le(Number(e)))})),o.a.createElement(_e,{htmlFor:"speed-input",label:t("speed")},o.a.createElement("select",{id:"speed-input",className:L.a.formControl,value:i,onChange:({currentTarget:{value:e}})=>n(ie(Number(e)))},f.map(e=>o.a.createElement("option",{key:e,value:e},t(g[e])))))))},_e=e=>{const{label:t,htmlFor:a,children:n}=e;return o.a.createElement("div",{className:L.a.formGroup},o.a.createElement("label",{htmlFor:a,className:c(L.a.fontWeightBold,O.a.gameControlLabel)},t),n)},we=e=>{const{Lang:t}=e;return o.a.createElement(W,{id:"game-info",defaultShow:!0},o.a.createElement("a",{href:"#"},o.a.createElement("h5",null,t("game info"))),o.a.createElement("div",{className:c(L.a.dFlex,L.a.flexColumn)},o.a.createElement("ul",{className:c(L.a.listGroup,L.a.listGroupFlush)},o.a.createElement("li",{className:c(L.a.listGroupItem,L.a.px0)},o.a.createElement("a",{target:"_blank",rel:"noopener",href:"http://shiftingmind.com/chaosgame/"},o.a.createElement("div",{className:L.a.media},o.a.createElement("img",{className:c(L.a.mr3,L.a.w25),src:r("hexa.gif")}),o.a.createElement("div",{className:L.a.mediaBody},o.a.createElement("h4",{className:L.a.mt0},t("how does it work")),o.a.createElement("p",{className:O.a.gameInfoLabel},t("how does it work desc")))))),o.a.createElement("li",{className:c(L.a.listGroupItem,L.a.px0)},o.a.createElement("a",{target:"_blank",rel:"noopener",href:"https://community.wolfram.com/groups/-/m/t/1025180"},o.a.createElement("div",{className:L.a.media},o.a.createElement("img",{className:c(L.a.mr3,L.a.w25),src:r("wolfram.gif")}),o.a.createElement("div",{className:L.a.mediaBody},o.a.createElement("h4",{className:L.a.mt0},t("mathematica chaos")),o.a.createElement("p",{className:O.a.gameInfoLabel},t("mathematica chaos desc")))))),o.a.createElement("li",{className:c(L.a.listGroupItem,L.a.px0)},o.a.createElement("a",{target:"_blank",rel:"noopener",href:"http://rectangleworld.com/blog/archives/561"},o.a.createElement("div",{className:L.a.media},o.a.createElement("img",{className:c(L.a.mr3,L.a.w25),src:r("six_fractals.jpg")}),o.a.createElement("div",{className:L.a.mediaBody},o.a.createElement("h4",{className:L.a.mt0},t("rectangle world")),o.a.createElement("p",{className:O.a.gameInfoLabel},t("rectangle world desc")))))),o.a.createElement("li",{className:c(L.a.listGroupItem,L.a.px0)},o.a.createElement("div",{className:c(L.a.embedResponsive,L.a.embedResponsive1By1)},o.a.createElement("iframe",{className:c(L.a.embedResponsiveItem),src:"https://www.youtube.com/embed/kbKtFN71Lfs",allow:"encrypted-media; picture-in-picture;",allowFullScreen:!0}))),o.a.createElement("li",{className:c(L.a.listGroupItem,L.a.px0)},o.a.createElement("div",{className:c(L.a.embedResponsive,L.a.embedResponsive1By1)},o.a.createElement("iframe",{className:c(L.a.embedResponsiveItem),src:"https://www.youtube.com/embed/eJAs9Qr359o?start=97",allow:"encrypted-media; picture-in-picture;",allowFullScreen:!0}))))))},ve=o.a.forwardRef((e,t)=>{const{id:a,Lang:n}=e;return o.a.createElement("aside",{id:a,ref:t,className:c(L.a.modal,L.a.fade),tabIndex:-1},o.a.createElement("div",{className:c(L.a.modalDialog,L.a.modalDialogCentered)},o.a.createElement("div",{className:L.a.modalContent},o.a.createElement("div",{className:L.a.modalHeader},o.a.createElement("h5",{className:L.a.modalTitle},n("info modal title")),o.a.createElement("button",{className:L.a.close,"data-dismiss":"modal"},o.a.createElement("span",null,"Ã—"))),o.a.createElement("div",{className:L.a.modalBody},o.a.createElement("article",{className:c(L.a.dFlex,L.a.flexColumn)},o.a.createElement("section",{className:L.a.mb1},o.a.createElement("h6",null,n("how do i start")),o.a.createElement("b",null,n("how do i start desc"))),o.a.createElement("section",null,o.a.createElement("h6",null,n("game params")),o.a.createElement("p",null,n("game params desc"))),o.a.createElement("section",null,o.a.createElement("h6",null,n("game slow")),o.a.createElement("p",null,n("game slow desc"))))))))}),xe=()=>o.a.createElement("div",{className:c(L.a.flexGrow1,L.a.w100,L.a.h100,L.a.dFlex,L.a.flexColumn,L.a.justifyContentCenter,L.a.alignContentCenter)},o.a.createElement("div",{className:c(L.a.dFlex,L.a.justifyContentCenter)},o.a.createElement("div",{className:c(L.a.spinnerGrow,L.a.textPrimary)}),o.a.createElement("div",{className:c(L.a.spinnerGrow,L.a.textSecondary)}),o.a.createElement("div",{className:c(L.a.spinnerGrow,L.a.textSuccess)}),o.a.createElement("div",{className:c(L.a.spinnerGrow,L.a.textDanger)}),o.a.createElement("div",{className:c(L.a.spinnerGrow,L.a.textWarning)}),o.a.createElement("div",{className:c(L.a.spinnerGrow,L.a.textInfo)}),o.a.createElement("div",{className:c(L.a.spinnerGrow,L.a.textDark)}))),Ee=e=>{const{Lang:t}=e;return o.a.createElement("aside",{ref:e=>B()(e).modal(),className:c(L.a.modal,L.a.fade,L.a.show),tabIndex:-1,"data-backdrop":"static","data-keyboard":"false"},o.a.createElement("div",{className:c(L.a.modalDialog,L.a.modalDialogCentered)},o.a.createElement("div",{className:L.a.modalContent},o.a.createElement("div",{className:c(L.a.modalHeader,L.a.dFlex,L.a.flexColumn)},o.a.createElement("h5",{className:L.a.modalTitle},t("outdated browser modal title")),o.a.createElement("h6",null,t("require webgl2 wasm"))),o.a.createElement("div",{className:L.a.modalBody},o.a.createElement("div",{className:c(L.a.dFlex,L.a.flexColumn)},o.a.createElement("div",{className:c(L.a.dFlex)},o.a.createElement("a",{className:c(O.a.outdatedBrowserImg,L.a.dFlex,L.a.flexColumn,L.a.justifyContentCenter),target:"_blank",rel:"noopener",href:"https://www.mozilla.org/en-CA/firefox/new/"},o.a.createElement("img",{className:c(L.a.imgFluid,L.a.rounded,L.a.w100,L.a.hAuto),src:r("firefox.png")})),o.a.createElement("span",{className:L.a.mx4}),o.a.createElement("a",{className:c(O.a.outdatedBrowserImg,L.a.dFlex,L.a.flexColumn,L.a.justifyContentCenter),target:"_blank",rel:"noopener",href:"https://www.google.ca/chrome/"},o.a.createElement("img",{className:c(L.a.imgFluid,L.a.rounded,L.a.w100,L.a.hAuto),src:r("chrome.png")}))))))))},be=e=>{const{Lang:t,store:{fetch:a,dispatch:n}}=e,{status:r}=a().recording;return o.a.createElement("div",{id:"save-media",className:c(L.a.dFlex,L.a.flexColumn)},o.a.createElement("button",{className:c(L.a.btn,L.a.btnOutlinePrimary,{[L.a.active]:"recording"===r}),"data-toggle":"tooltip",title:t("recording tooltip"),onClick:()=>n(de())},o.a.createElement("em",null,t("recording"===r?"recording inprogress":"recording"))),o.a.createElement("span",{className:L.a.my1}),o.a.createElement("button",{className:c(L.a.btn,L.a.btnOutlineInfo),"data-toggle":"tooltip",title:t("download tooltip"),onClick:()=>n((()=>async(e,t)=>{const{page:{canvas:a}}=e();if("loaded"!==a.status)return;const{screenshot:n}=a.render;m({name:`${String(Math.random()).replace(".","")}.png`,uri:n()})})())},o.a.createElement("em",null,t("download"))))},ye=e=>{const{store:{fetch:t},Lang:a}=e,{statistics:{fps:n,dotsDrawn:r}}=t();return o.a.createElement("aside",{id:"statistics-tracker",className:c(L.a.dFlex,L.a.flexColumn,L.a.textRight,L.a.textPrimary)},o.a.createElement("output",{className:L.a.textTruncate},0===n?"":a("fps %@",n.toFixed(1))),o.a.createElement("output",{className:L.a.textTruncate},0===r?"":a("dots drawn %@",r)))};a(59),a(64),a(67);const Ae=e=>{const t=o.a.createRef(),a=o.a.createRef(),n=o.a.createRef(),r=o.a.createRef(),s=o.a.createRef(),u=o.a.createRef(),m=o.a.createRef(),{Lang:d,store:p,presets:g,minLeftPanel:f,maxLeftPanel:h,minRightPanel:_,maxRightPanel:w,resizeThrottle:v}=e,{fetch:x,dispatch:E}=p,{wasm:{status:b},canvas:{status:y}}=x().page;return o.a.useEffect(()=>{const e=t.current,o=a.current,c=r.current,d=s.current,p=n.current,g=u.current,b=m.current,{clientWidth:y}=document.documentElement;new I.a(i(v,([{contentRect:{width:t,height:a}}])=>{e.width=t*devicePixelRatio,e.height=a*devicePixelRatio,E((()=>(e,t)=>oe(e))())})).observe(e),B()(o).width(`${y*f}px`).resizable({handles:{e:c}}).on("resize",(e,{size:t})=>{const{clientWidth:a,clientHeight:n}=document.documentElement;t.width=l(a*f,a*h)(t.width),t.height=Math.min(t.height,n)}),B()(p).width(`${y*_}px`).resizable({handles:{w:d}}).on("resize",(e,{size:t,position:a})=>{const{clientWidth:n,clientHeight:o}=document.documentElement;a.left=0,t.width=l(n*_,n*w)(t.width),t.height=Math.min(t.height,o)}),globalThis.onresize=i(v,(e=>()=>{const{clientWidth:t}=document.documentElement,a=l(f,h)(o.clientWidth/e),n=l(_,w)(p.clientWidth/e);o.style.width=`${a*t}px`,p.style.width=`${n*t}px`,e=t})(y)),E((e=>(t,a)=>{const n=e.getContext("webgl2",{antialias:!1,stencil:!1,depth:!1});if(!n)return a({type:"no-webgl2"});a({type:"canvas-loaded",render:ee(n)}),setTimeout(()=>ne(t))})(e)),B()('[data-toggle="tooltip"]').tooltip(),(()=>{const{status:e}=x().page.canvas;"failed"!==e&&B()(g).modal().on("hidden.bs.modal",()=>B()(b).tooltip("toggle"))})()},[]),o.a.createElement(o.a.StrictMode,null,o.a.createElement("div",{className:c(L.a.vh100,L.a.vw100,L.a.dFlex)},o.a.createElement("div",{ref:a,className:c(L.a.vh100,L.a.overflowAuto)},o.a.createElement(M,null,o.a.createElement(he,{Lang:d,store:p}),o.a.createElement(pe,{Lang:d,store:p}),o.a.createElement(we,{Lang:d}))),o.a.createElement("div",{ref:r,className:c(O.a.splitter,L.a.h100,G.a.uiResizableHandle,G.a.uiResizableE)}),o.a.createElement("main",{className:c(L.a.h100,L.a.flexGrow1,L.a.dFlex,L.a.flexColumn,L.a.justifyContentCenter,L.a.alignItemsCenter,L.a.positionRelative,{[O.a.waiting]:"loading"===b})},o.a.createElement("span",{id:"reset-button","data-toggle":"tooltip",title:d("reset")},o.a.createElement("button",{className:c(L.a.btn,L.a.btnOutlineDanger),onClick:()=>E((()=>(e,t)=>{const{game:{runloop:a}}=e();"running"===a.status&&a.stop(),t({type:"end-game"}),setTimeout(()=>ne(e))})())},o.a.createElement("em",null,d("reset")))),o.a.createElement(ye,{Lang:d,store:p}),o.a.createElement(be,{Lang:d,store:p}),o.a.createElement("span",{id:"help-tag",ref:m,className:c(O.a.clickable),"data-toggle":"tooltip",title:d("help")},o.a.createElement("button",{className:c(L.a.btn,L.a.btnSm,L.a.btnOutlineSecondary),"data-toggle":"modal","data-target":"#info-modal"},o.a.createElement("i",{className:"fas fa-2x fa-question-circle"}))),"loading"===b?o.a.createElement(xe,null):void 0,o.a.createElement("div",{className:c(O.a.canvasContainer,{[L.a.dNone]:"loading"===b})},o.a.createElement("canvas",{ref:t,onMouseDown:({clientX:e,clientY:t,currentTarget:a})=>{const{top:n,left:o,bottom:r,right:s}=a.getBoundingClientRect();E((e=>(t,a)=>{const{page:{wasm:n},game:{runloop:o}}=t();if("loaded"!==n.status)return;const{NewVertex:r}=n.exports,s=r(e,"before-start"===o.status);if("error"===s.type)return console.error(s.error);switch(o.status){case"before-start":case"paused":return a({type:"start-game",stop:re(t,a)});case"running":return o.stop(),a({type:"pause-game"})}})([(e-o)/(s-o)*2-1,(t-n)/(r-n)*-2+1]))}}))),o.a.createElement("aside",{ref:n,className:c(L.a.vh100,L.a.dFlex)},o.a.createElement("div",{ref:s,className:c(O.a.splitter,L.a.h100,G.a.uiResizableHandle,G.a.uiResizableW)}),o.a.createElement(fe,{Lang:d,store:p,presets:g}))),"failed"===y||"failed"===b?o.a.createElement(Ee,{Lang:d}):void 0,o.a.createElement(ve,{ref:u,Lang:d,id:"info-modal"}))};var Ne=a(13);const Re=async()=>{const{run:e,retrieve:t}=await(async e=>{const t=new Go,{instance:a}=await WebAssembly.instantiateStreaming(fetch(e),t.importObject),n=globalThis["__go-wasm__"]={};return{run:()=>t.run(a),retrieve:e=>{const t=n[e]||(()=>({type:"error",error:`${e} is not a function`}));return(...e)=>t(...e)}}})("main.wasm");return e(),{NewVertices:t("NewVertices"),NewRestriction:t("NewRestriction"),NewCompression:t("NewCompression"),NewDots:t("NewDots"),NewVertex:t("NewVertex"),RequestDrawingInstructions:t("RequestDrawingInstructions")}};(async()=>{const e=(e=>{for(let t=e.length-1;t>0;t--){const a=Math.floor(Math.random()*(t+1));[e[t],e[a]]=[e[a],e[t]]}return e})(v),t=D(x);(async()=>{const a=await Re();t.dispatch((e=>(t,a)=>{a({type:"wasm-loaded",exports:e}),setTimeout(()=>ne(t))})(a)),t.dispatch(me(e))})();const[a]=await Promise.all([A("en",!0),s()]),n=document.body.appendChild(document.createElement("div"));t.subscribe(()=>Object(Ne.render)(o.a.createElement(Ae,{Lang:a,store:t,presets:v,resizeThrottle:50,minLeftPanel:.15,maxLeftPanel:.2,minRightPanel:.15,maxRightPanel:.2}),n)),t.dispatch({type:"DOM-loaded"})})()}],[[72,1,2]]]);